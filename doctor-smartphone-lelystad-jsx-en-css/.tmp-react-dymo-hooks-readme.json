"# react-dymo\n\n> TypeScript-ready React hooks and utilities for the Dymo LabelWriter web service.\n\n[![NPM](https://img.shields.io/npm/v/react-dymo-hooks.svg)](https://www.npmjs.com/package/react-dymo-hooks) [![JavaScript Style Guide](https://img.shields.io/badge/code_style-standard-brightgreen.svg)](https://standardjs.com)\n\n## v3.0.0 - Major Rewrite\n\nThis major release brings full TypeScript support, modern build tooling, and zero external HTTP dependencies.\n\n### Breaking Changes\n\n- **DymoPrinter interface**: Boolean properties (`isLocal`, `isTwinTurbo`, `isConnected`) are now actual booleans instead of string `\"True\"`/`\"False\"` values\n- **Removed axios**: HTTP requests now use native Fetch API\n  - Replace `cancelToken` with `signal` (AbortController)\n  - Replace `axios.isCancel()` with `isRequestCancelled()`\n  - Replace `axiosOtherParams` with `fetchOptions`\n- **Response type**: `dymoRequestBuilder` returns `DymoResponse` instead of `AxiosResponse`\n\n### New Features\n\n- Full TypeScript support with exported types and interfaces\n- Native Fetch API (~40KB smaller bundle, no axios dependency)\n- AbortController for request cancellation (Web standard)\n- Vite + Vitest for faster builds and tests\n- Comprehensive test suite with 90%+ coverage\n- Better IDE autocomplete and type checking\n\n### Migration Guide\n\n#### Boolean Properties\n\n```typescript\n// Before (v2.x)\nif (printer.isLocal === \"True\") { ... }\n\n// After (v3.x)\nif (printer.isLocal === true) { ... }\n// or simply: if (printer.isLocal) { ... }\n```\n\n#### Request Cancellation\n\n```typescript\n// Before (v2.x with axios)\nimport axios from \"axios\";\nconst source = axios.CancelToken.source();\ndymoRequestBuilder({ cancelToken: source.token, ... });\nif (axios.isCancel(error)) { ... }\n\n// After (v3.x with fetch)\nimport { isRequestCancelled } from \"react-dymo-hooks\";\nconst controller = new AbortController();\ndymoRequestBuilder({ signal: controller.signal, ... });\nif (isRequestCancelled(error)) { ... }\n```\n\n## Install\n\n```bash\nnpm install --save react-dymo-hooks\n```\n\nor\n\n```bash\nyarn add react-dymo-hooks\n```\n\n## API\n\n### `printLabel()`\n\nPrint Dymo labels.\n\n#### Arguments\n\n- `printerName` {string} - The Dymo Printer to print on\n- `labelXml` {string} - Label XML parsed to string\n- `labelSetXml` {string} - Optional. LabelSet to print multiple labels with same layout but different data\n\n#### Returns\n\n- `Promise<DymoResponse>` - Response from the DYMO service\n\n### `useDymoCheckService()`\n\nReturn the status of DYMO Label Web Service.\n\n#### Arguments\n\n- `port` {number} - Optional. The port of running DYMO Label Web Service (default: 41951)\n\n#### Returns\n\n- `status` - `\"initial\" | \"loading\" | \"success\" | \"error\"` Status of DYMO Label Web Service\n\n### `useDymoFetchPrinters()`\n\nReturns the available DYMO Labelwriter Printers.\n\n#### Arguments\n\n- `statusDymoService` {ServiceStatus} - The status from `useDymoCheckService()`\n- `modelPrinter` {string} - Optional. The model of label writer printer (default: \"LabelWriterPrinter\")\n- `port` {number} - Optional. The port of running DYMO Label Web Service (default: 41951)\n\n#### Returns\n\nObject containing:\n\n- `statusFetchPrinters` - `\"initial\" | \"loading\" | \"success\" | \"error\"`\n- `printers` - Array of `DymoPrinter` objects\n- `error` - Error object if request failed\n\n### `useDymoOpenLabel()`\n\nRender a label preview.\n\n#### Arguments\n\n- `statusDymoService` {ServiceStatus} - The status from `useDymoCheckService()`\n- `labelXML` {string} - Label XML content\n- `port` {number} - Optional. The port of running DYMO Label Web Service (default: 41951)\n\n#### Returns\n\nObject containing:\n\n- `statusOpenLabel` - `\"initial\" | \"loading\" | \"success\" | \"error\"`\n- `label` - Base64 encoded PNG\n- `error` - Error object if request failed\n\n### `isRequestCancelled()`\n\nCheck if an error is a cancellation error.\n\n#### Arguments\n\n- `error` {any} - The error to check\n\n#### Returns\n\n- `boolean` - `true` if the error is a cancellation\n\n## Run Example\n\nFrom the root directory:\n\n```bash\nnpm run example\n```\n\nOr manually:\n\n```bash\ncd example\nnpm install\nnpm start\n```\n\nThe example app uses Vite + React 18 + TypeScript.\n\n## TypeScript Support\n\nThe library is written in TypeScript and exports all necessary types:\n\n```typescript\nimport {\n  // Hooks\n  useDymoCheckService,\n  useDymoFetchPrinters,\n  useDymoOpenLabel,\n\n  // Functions\n  printLabel,\n  dymoRequestBuilder,\n  dymoUrlBuilder,\n  getDymoPrintersFromXml,\n  isRequestCancelled,\n\n  // Types\n  DymoPrinter,\n  DymoResponse,\n  DymoRequestConfig,\n  DymoRequestParams,\n  ServiceStatus,\n  FetchPrintersResult,\n  OpenLabelResult,\n\n  // Error class\n  RequestCancelledError,\n} from \"react-dymo-hooks\";\n\n// All hooks and utilities are fully typed\nconst statusDymoService: ServiceStatus = useDymoCheckService();\nconst {printers, statusFetchPrinters, error}: FetchPrintersResult = useDymoFetchPrinters(statusDymoService);\n\n// DymoPrinter interface with proper boolean types\nprinters.forEach((printer: DymoPrinter) => {\n  console.log(`${printer.name}: ${printer.isConnected ? \"Online\" : \"Offline\"}`);\n});\n```\n\n## Examples\n\n### Print a Dymo Label\n\n```tsx\nimport {printLabel} from \"react-dymo-hooks\";\n\nasync function handlePrintSingleLabel(printerName: string, labelXml: string) {\n  try {\n    const response = await printLabel(printerName, labelXml);\n    console.info(response);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n<button onClick={() => handlePrintLabel(printer, xml)}>Print</button>;\n```\n\n### Preview a Label\n\n```tsx\nimport {useDymoOpenLabel, useDymoCheckService} from \"react-dymo-hooks\";\n\nconst DymoLabelPreview = ({xmlFile}: {xmlFile: string}) => {\n  const statusDymoService = useDymoCheckService();\n  const {label, statusOpenLabel, error} = useDymoOpenLabel(statusDymoService, xmlFile);\n\n  if (statusOpenLabel === \"loading\") return <p>Loading preview...</p>;\n  if (statusOpenLabel === \"error\") return <p>Error: {error?.message}</p>;\n  if (statusOpenLabel === \"success\" && label) {\n    return <img src={`data:image/png;base64,${label}`} alt=\"Label preview\" />;\n  }\n  return null;\n};\n```\n\n### List Available Printers\n\n```tsx\nimport {useDymoCheckService, useDymoFetchPrinters, DymoPrinter} from \"react-dymo-hooks\";\n\nconst PrinterList = () => {\n  const status = useDymoCheckService();\n  const {printers, statusFetchPrinters} = useDymoFetchPrinters(status);\n\n  if (statusFetchPrinters === \"loading\") return <p>Loading printers...</p>;\n  if (statusFetchPrinters === \"error\") return <p>Failed to load printers</p>;\n\n  return (\n    <ul>\n      {printers.map((printer: DymoPrinter) => (\n        <li key={printer.name}>\n          {printer.name} - {printer.isConnected ? \"Connected\" : \"Disconnected\"}\n        </li>\n      ))}\n    </ul>\n  );\n};\n```\n\n## Development\n\n```bash\n# Install dependencies\nnpm install\n\n# Run tests\nnpm run test:unit\n\n# Run tests in watch mode\nnpm run test:watch\n\n# Build the library\nnpm run build\n\n# Run example app\nnpm run example\n```\n\n## License\n\nMIT ┬® [apenab](https://github.com/apenab)\n"
